<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aşk diz - أفضل المسلسلات التركية المترجمة</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* ================================================= */
        /* 1. الترتيب والأساسيات (Reset & Variables)        */
        /* ================================================= */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        :root {
            --primary: #c41e3a; /* أحمر جذاب */
            --primary-dark: #a0182e; /* أحمر أغمق للتركيز */
            --secondary: #2c3e50; /* خلفية داكنة للفوتر والمشغل */
            --bg-body: #f0f2f5; /* خلفية فاتحة جداً وعصرية */
            --bg-card: #ffffff;
            --text-dark: #34495e; /* نص داكن أكثر وضوحاً */
            --text-light: #ecf0f1;
            --text-gray: #7f8c8d;
            --card-radius: 18px; /* حواف ناعمة */
            --shadow-subtle: rgba(0, 0, 0, 0.05);
            --shadow-focus: rgba(196, 30, 58, 0.3);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: var(--bg-body);
            color: var(--text-dark);
            line-height: 1.6;
            direction: rtl;
            text-align: right;
            overflow-x: hidden;
        }

        a { text-decoration: none; color: inherit; }
        button { cursor: pointer; border: none; background: none; }
        
        /* ================================================= */
        /* 2. شريط التنقل (Navigation)                      */
        /* ================================================= */

        nav {
            background: var(--bg-card);
            box-shadow: 0 2px 8px var(--shadow-subtle);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1300px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 25px;
            height: 70px; /* ارتفاع أنيق */
        }
        
        .logo {
            font-size: 32px;
            font-weight: 900;
            color: var(--primary);
        }
        .logo-subtitle {
            font-size: 12px;
            color: var(--text-gray);
            font-weight: 500;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-dark);
            font-weight: 600;
            padding: 8px 15px;
            border-radius: 8px;
            display: flex; /* لترتيب الأيقونات والنصوص */
            align-items: center;
            gap: 8px;
        }

        .nav-links a:hover {
            color: var(--bg-card);
            background: var(--primary);
        }
        
        /* Hamburger Icon */
        .menu-toggle {
            display: none; /* مخفي في الديسكتوب */
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            width: 30px;
            height: 25px;
            justify-content: center;
            align-items: flex-end; /* لتنسيق الشرطات بشكل جميل */
            position: relative;
            z-index: 1001; /* فوق القائمة الجانبية */
        }
        .menu-toggle span {
            width: 100%;
            height: 3px;
            background: var(--primary);
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        .menu-toggle span:nth-child(2) { width: 70%; } /* شريط أوسط أقصر */
        .menu-toggle.active span:first-child { transform: rotate(45deg) translate(5px, 5px); }
        .menu-toggle.active span:nth-child(2) { opacity: 0; }
        .menu-toggle.active span:last-child { transform: rotate(-45deg) translate(5px, -5px); }

        /* ================================================= */
        /* 3. الهيدر (Header)                               */
        /* ================================================= */

        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            text-align: center;
            padding: 90px 20px;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
        }
        
        .main-title {
            font-size: 52px;
            font-weight: 900;
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);
        }
        .main-subtitle {
            font-size: 20px;
            font-weight: 400;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 60px 25px;
        }
        
        .section-title {
            font-size: 32px;
            font-weight: 800;
            color: var(--text-dark);
            margin-bottom: 45px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* ================================================= */
        /* 4. بطاقات المسلسلات (Series Cards)               */
        /* ================================================= */
        
        .series-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(290px, 1fr));
            gap: 35px;
        }

        .series-card {
            background: var(--bg-card);
            border-radius: var(--card-radius);
            box-shadow: 0 4px 15px var(--shadow-subtle);
            overflow: hidden;
            position: relative;
            cursor: pointer;
        }
        
        .series-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .series-card:active {
            transform: scale(0.98);
            box-shadow: 0 2px 10px var(--shadow-focus);
        }

        .series-image-wrapper {
            position: relative;
            height: 420px; 
            border-radius: var(--card-radius);
            overflow: hidden;
        }

        .series-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.8); 
        }
        
        .series-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 25px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.95));
            color: white;
            text-align: right;
        }
        
        .series-title {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: 5px;
        }
        .series-title-en {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .series-meta {
            padding-top: 12px;
            margin-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 15px;
            font-size: 13px;
            opacity: 0.8;
        }
        .series-badge {
            background: var(--primary);
            top: 20px;
            right: 20px;
            font-size: 12px;
            z-index: 10;
            border-radius: 8px;
            padding: 6px 12px;
            font-weight: 700;
        }
        
        /* ================================================= */
        /* 5. المودال والخلفية البصرية (Modal & Backdrop)  */
        /* ================================================= */

        .modal {
            background: rgba(0, 0, 0, 0.9); /* تعتيم أقل للسماح بالخلفية */
            display: flex; /* لمركزة المحتوى */
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            border-radius: 20px;
            max-width: 950px;
            width: 90%; /* لمرونة أفضل */
            background: none; 
            box-shadow: none;
        }
        
        .modal-backdrop-container {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }

        .modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            filter: blur(10px) brightness(0.7); /* تضبيب وتعتيم متوازن */
            opacity: 0.6; 
            z-index: 1;
        }

        .modal-body-wrapper {
            position: relative;
            z-index: 5; 
            background-color: rgba(255, 255, 255, 0.98); /* طبقة بيضاء شبه شفافة للمحتوى */
            border-radius: 15px; /* حواف داخلية أصغر قليلاً */
            margin: 25px; /* إطار داخلي جميل */
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        .modal-header {
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-dark) 100%); /* تدرج لوني للهيدر */
            color: var(--text-light);
            padding: 30px 40px;
            border-radius: 15px 15px 0 0;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            left: 15px;
            color: white;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .close-modal:hover { background: var(--primary); }

        .modal-body {
            padding: 35px;
        }

        .modal-description {
            font-size: 16px;
            line-height: 1.8;
            background: var(--bg-body); /* خلفية خفيفة للوصف */
            padding: 20px;
            border-radius: 10px;
            border-right: 5px solid var(--primary);
            margin-bottom: 30px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05); /* ظل داخلي ناعم */
        }
        
        .episodes-section-title {
            font-size: 26px;
            font-weight: 800;
            color: var(--text-dark);
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* أزرار الحلقات الدائرية الجديدة */
        .episodes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); /* حجم أصغر لملاءمة الدوائر */
            gap: 15px;
        }
        
        .episode-btn {
            width: 60px; /* لتحديد حجم دائري */
            height: 60px;
            border-radius: 50%; /* لجعلها دائرية */
            border: 2px solid var(--primary);
            background: var(--bg-card);
            color: var(--primary);
            font-weight: 700;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 8px var(--shadow-subtle);
        }
        
        .episode-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px var(--shadow-focus);
        }
        
        /* ================================================= */
        /* 6. مربع الانتظار (Loading Modal)                 */
        /* ================================================= */

        #loadingModal {
            z-index: 5000;
            background: rgba(0, 0, 0, 0.95);
        }
        
        .loading-title {
            font-size: 32px;
            color: var(--primary);
            font-weight: 700;
            margin-bottom: 30px;
        }

        .countdown-timer {
            position: relative;
            width: 120px; /* حجم أكبر للعداد */
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 60px;
            color: white;
            font-weight: 800;
        }

        .countdown-timer-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 8px solid rgba(255, 255, 255, 0.2);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite; 
        }
        
        /* ================================================= */
        /* 7. مشغل الفيديو (Video Player) - انسيابي وجميل   */
        /* ================================================= */

        .video-player {
            z-index: 3000;
            background: var(--secondary);
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
        }
        
        .video-header {
            background: var(--secondary);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .video-title {
            font-size: 22px;
            color: var(--text-light);
            font-weight: 600;
        }
        
        .player-settings {
            margin-top: 5px;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            display: flex;
            gap: 15px;
        }
        
        .player-setting-item {
            cursor: pointer;
        }
        .player-setting-item:hover {
            color: var(--primary);
        }
        
        .close-player {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 6px;
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .close-player:hover {
            background: var(--primary);
        }
        
        .video-container {
            flex-grow: 1; /* المشغل يأخذ كل المساحة المتاحة */
            width: 100%;
            height: 100%; /* يتمدد ليأخذ باقي ارتفاع الشاشة */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #rumble_player {
            width: 100%;
            height: 100%;
            max-width: 1600px; /* لتقييد العرض على الشاشات الكبيرة جداً */
            max-height: 900px; /* لتقييد الارتفاع */
        }
        
        /* ================================================= */
        /* 8. الفوتر (Footer)                               */
        /* ================================================= */

        footer {
            background: var(--secondary);
            color: white;
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
        }
        .footer-links a {
            color: white;
            opacity: 0.8;
            font-weight: 500;
        }
        .footer-links a:hover {
            opacity: 1;
            color: var(--primary);
        }
        .footer-text {
            font-size: 14px;
            opacity: 0.7;
            margin-top: 10px;
        }
        
        /* ================================================= */
        /* 9. الاستجابة والتنظيم (Responsiveness - Mobile)  */
        /* ================================================= */

        @media (max-width: 768px) {
            .nav-container { padding: 0 15px; }
            .logo { font-size: 26px; }
            .logo-subtitle { font-size: 11px; }

            .main-title { font-size: 38px; }
            .main-subtitle { font-size: 16px; }
            header { padding: 70px 15px; }

            .section-title { font-size: 26px; margin-bottom: 30px; }
            .series-grid { grid-template-columns: 1fr; gap: 25px; }
            .series-image-wrapper { height: 280px; }
            .series-title { font-size: 20px; }
            .series-overlay { padding: 18px; }

            .modal-content { margin: 20px auto; width: 95%; }
            .modal-body-wrapper { margin: 15px; }
            .modal-header { padding: 25px 30px; }
            .modal-title { font-size: 24px; }
            .modal-body { padding: 25px; }
            .episodes-section-title { font-size: 22px; margin-bottom: 20px; }
            .episode-btn { width: 50px; height: 50px; font-size: 16px; }
            .episodes-grid { gap: 10px; }

            .loading-title { font-size: 26px; }
            .countdown-timer { width: 100px; height: 100px; font-size: 45px; }
            .countdown-timer-ring { border-width: 6px; }

            .video-header { flex-direction: column; align-items: flex-start; gap: 10px; padding: 15px 20px; }
            .close-player { width: 100%; justify-content: center; }
            .player-settings { flex-wrap: wrap; gap: 10px; }
            .video-title { font-size: 18px; }
        }
    </style>
</head>
<body>
    <script>
        !function(r,u,m,b,l,e){r._Rumble=b,r[b]||(r[b]=function(){(r[b]._=r[b]._||[]).push(arguments);if(r[b]._.length==1){l=u.createElement(m),e=u.getElementsByTagName(m)[0],l.async=1,l.src="https://rumble.com/embedJS/u4nnppa"+(arguments[1].video?'.'+arguments[1].video:'')+"/?url="+encodeURIComponent(location.href)+"&args="+encodeURIComponent(JSON.stringify([].slice.apply(arguments))),e.parentNode.insertBefore(l,e)}})}(window, document, "script", "Rumble");
    </script>

    <nav>
        <div class="nav-container">
            <div>
                <div class="logo">Aşk diz</div>
                <div class="logo-subtitle">المسلسلات التركية</div>
            </div>
            <div class="menu-toggle" onclick="toggleNav()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="#home"><i class="fas fa-home"></i> الرئيسية</a>
                <a href="#series"><i class="fas fa-tv"></i> المسلسلات</a>
                <a href="#new"><i class="fas fa-fire"></i> الجديد</a>
                <a href="#popular"><i class="fas fa-chart-line"></i> الأكثر مشاهدة</a>
            </div>
        </div>
    </nav>

    <header id="home">
        <h1 class="main-title">Aşk diz</h1>
        <p class="main-subtitle">شاهد أفضل المسلسلات التركية المترجمة بجودة عالية</p>
    </header>

    <div class="container" id="series">
        <h2 class="section-title"><i class="fas fa-bolt"></i> أحدث المسلسلات المضافة</h2>
        <div class="series-grid" id="seriesGrid"></div>
    </div>

    <div class="modal" id="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000; overflow-y: auto;">
        <div class="modal-content">
            <div class="modal-backdrop-container">
                <div class="modal-backdrop" id="modalBackdrop"></div>

                <div class="modal-body-wrapper">
                    <div class="modal-header">
                        <button class="close-modal" onclick="closeModal()">
                            <i class="fas fa-times"></i>
                        </button>
                        <h2 class="modal-title" id="modalTitle"></h2>
                        <p class="modal-title-en" id="modalTitleEn"></p>
                    </div>

                    <div class="modal-body">
                        <div class="modal-description" id="modalDescription"></div>
                        <h3 class="episodes-section-title"><i class="fas fa-list-ol"></i> اختر الحلقة</h3>
                        <div class="episodes-grid" id="episodesGrid"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="loadingModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; justify-content: center; align-items: center; flex-direction: column;">
        <div class="loading-title">يتم الآن تجهيز المشغل...</div>
        <div class="countdown-timer">
            <div class="countdown-timer-ring"></div>
            <span id="countdownTimer">3</span>
        </div> 
    </div>

    <div class="video-player" id="videoPlayer" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;">
        <div class="video-header">
            <div>
                <div class="video-title" id="videoTitle"></div>
                <div class="player-settings">
                    <span class="player-setting-item"><i class="fas fa-cog"></i> إعدادات الجودة</span> 
                    <span class="player-setting-item"><i class="fas fa-closed-captioning"></i> الترجمة</span> 
                    <span class="player-setting-item"><i class="fas fa-tachometer-alt"></i> السرعة</span>
                </div>
            </div>
            <button class="close-player" onclick="closePlayer()">
                <i class="fas fa-times"></i> إغلاق
            </button>
        </div>
        <div class="video-container">
            <div id="rumble_player"></div>
        </div>
    </div>

    <footer id="contact">
        <div style="max-width: 1000px; margin: 0 auto;">
            <div class="footer-links" style="display: flex; justify-content: center; gap: 20px; margin-bottom: 15px;">
                <a href="#home">الرئيسية</a>
                <a href="#series">المسلسلات</a>
                <a href="#">سياسة الخصوصية</a>
            </div>
            <p class="footer-text">© 2025 Aşk diz - جميع الحقوق محفوظة</p>
        </div>
    </footer>

    <script>
        // Series Data (لأغراض العرض)
        const seriesData = [
            {
                id: 1,
                title: "حلم اشرف",
                titleEn: "Eşref'in rüyası",
                image: "https://3esk.onl/wp-content/uploads/2025/09/esref-ruya-2.jpg",
                description: "انضم أشرف إلى المافيا وأصبح أحد أقوى رجالها، بينما يواصل بحثه لسنوات عن فتاة حلم بها وأسماها رؤيا. يقع في حب نيسان، دون أن يدرك أنها هي نفسها رؤيا، وأنها تعمل سراً كمخبرة للشرطة، ليجد نفسه عالقًا بين الحب والخيانة والصراع على النفوذ.",
                episodes: 21, rating: "9.2", year: "2025",
                episodeLinks: { 1: "v6z54rg", 2: "v6z54rg", 3: "v6z54rg" }
            },
            {
                id: 2,
                title: "الحب لا يفهم الكلام",
                titleEn: "Aşk Laftan Anlamaz",
                image: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&h=700&fit=crop",
                description: "كوميديا رومانسية خفيفة تحكي قصة فتاة بسيطة تعمل في شركة كبيرة وتقع في حب مديرها المتكبر. مسلسل مليء بالمواقف الطريفة والرومانسية والمشاعر المتضاربة.",
                episodes: 30, rating: "8.8", year: "2022",
                episodeLinks: { 1: "v6z54rg", 2: "v6z54rg" }
            },
            {
                id: 3,
                title: "الطائر المبكر",
                titleEn: "Erkenci Kuş",
                image: "https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=500&h=700&fit=crop",
                description: "قصة حب جميلة بين مصور محترف وفتاة تحلم بأن تصبح كاتبة. يجمعهما القدر في مواقف طريفة ورومانسية لا تُنسى في عالم الإعلانات.",
                episodes: 51, rating: "9.5", year: "2023",
                episodeLinks: { 1: "v6z54rg" }
            }
        ];

        function renderSeries() {
            const grid = document.getElementById('seriesGrid');
            grid.innerHTML = seriesData.map(series => `
                <div class="series-card" onclick="openModal(${series.id})">
                    <div class="series-image-wrapper">
                        <img src="${series.image}" alt="${series.title}" class="series-image">
                        <span class="series-badge"><i class="fas fa-star"></i> ${series.rating}</span>
                        
                        <div class="series-overlay">
                            <h3 class="series-title">${series.title}</h3>
                            <p class="series-title-en">${series.titleEn}</p>
                            <div class="series-meta">
                                <span class="meta-item"><i class="fas fa-video"></i> ${series.episodes} حلقة</span>
                                <span class="meta-item"><i class="fas fa-calendar-alt"></i> ${series.year}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function toggleNav() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
            document.querySelector('.menu-toggle').classList.toggle('active');
            document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : 'auto';
        }

        function openModal(seriesId) {
            const series = seriesData.find(s => s.id === seriesId);
            if (!series) return;

            const modalBackdrop = document.getElementById('modalBackdrop');
            modalBackdrop.style.backgroundImage = `url('${series.image}')`;
            
            document.getElementById('modalTitle').textContent = series.title;
            document.getElementById('modalTitleEn').textContent = series.titleEn;
            document.getElementById('modalDescription').textContent = series.description;

            const episodesGrid = document.getElementById('episodesGrid');
            episodesGrid.innerHTML = '';
            
            for (let i = 1; i <= series.episodes; i++) {
                const btn = document.createElement('button');
                btn.className = 'episode-btn';
                btn.textContent = i;
                btn.onclick = () => showLoadingAndPlay(seriesId, i); 
                episodesGrid.appendChild(btn);
            }

            document.getElementById('modal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function showLoadingAndPlay(seriesId, episodeNum) {
            closeModal(); 
            
            const loadingModal = document.getElementById('loadingModal');
            const countdownTimer = document.getElementById('countdownTimer');
            loadingModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';

            let countdown = 3;
            countdownTimer.textContent = countdown;
            
            const timer = setInterval(() => {
                countdown--;
                countdownTimer.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    loadingModal.style.display = 'none';
                    playEpisode(seriesId, episodeNum); 
                }
            }, 1000);
        }

        function playEpisode(seriesId, episodeNum) {
            const series = seriesData.find(s => s.id === seriesId);
            if (!series) return;

            const videoId = series.episodeLinks[episodeNum] || series.episodeLinks[1];
            
            document.getElementById('videoTitle').textContent = `${series.title} - الحلقة ${episodeNum}`;
            
            const rumblePlayer = document.getElementById('rumble_player');
            rumblePlayer.innerHTML = '';
            
            const divId = 'rumble_' + videoId + '_' + Date.now();
            rumblePlayer.innerHTML = `<div id="${divId}" style="width: 100%; height: 100%;"></div>`;
            
            setTimeout(() => {
                if (typeof Rumble !== 'undefined') {
                    Rumble("play", {"video": videoId, "div": divId});
                } else {
                    console.error("Rumble API script not loaded.");
                }
            }, 200);
            
            document.getElementById('videoPlayer').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closePlayer() {
            const rumblePlayer = document.getElementById('rumble_player');
            rumblePlayer.innerHTML = ''; 
            document.getElementById('videoPlayer').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
                closePlayer();
                document.getElementById('loadingModal').style.display = 'none';
            }
        });

        window.onload = renderSeries;
    </script>
</body>
</html>
