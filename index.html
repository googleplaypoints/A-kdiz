<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aşk diz - أفضل المسلسلات التركية المترجمة</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* ================================================= */
        /* 1. الترتيب والأساسيات (Dark & Romantic Theme)    */
        /* ================================================= */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        :root {
            --primary: #CC3366; /* أحمر وردي داكن (Rosewood) - لون رومانسي فاخر */
            --primary-light: #FFD700; /* ذهبي براق للتفاصيل والأيقونات */
            --secondary: #0a0a0a; /* أسود عميق للمشغل والخلفيات الداكنة */
            --bg-body: #121212; /* خلفية الموقع الرئيسية (أسود داكن) */
            --bg-card: #1e1e1e; /* خلفية البطاقات (رمادي داكن) */
            --text-dark: #e0e0e0; /* نص فاتح للخلفيات الداكنة */
            --text-light: #ffffff; /* نص أبيض ناصع */
            --text-gray: #b0b0b0; /* نص رمادي فاتح */
            --card-radius: 15px; 
            --shadow-subtle: rgba(0, 0, 0, 0.4);
            --shadow-focus: rgba(204, 51, 102, 0.6);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: var(--bg-body);
            color: var(--text-dark);
            line-height: 1.7;
            direction: rtl;
            text-align: right;
            overflow-x: hidden;
            min-height: 100vh;
        }

        a { text-decoration: none; color: inherit; }
        button { cursor: pointer; border: none; background: none; }
        
        /* ================================================= */
        /* 2. شريط التنقل (Navigation) - زر القائمة لليسار  */
        /* ================================================= */

        nav {
            background: var(--bg-card);
            box-shadow: 0 2px 10px var(--shadow-subtle);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1440px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            height: 80px;
        }
        
        .logo {
            font-size: 36px;
            font-weight: 900;
            color: var(--primary);
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.05);
        }

        .nav-links {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-gray);
            font-weight: 700;
            padding: 10px 18px;
            border-radius: 6px;
        }

        .nav-links a:hover {
            color: var(--text-light);
            background: var(--primary);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* زر الهمبرغر */
        .menu-toggle {
            display: none; 
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            width: 30px;
            height: 25px;
            justify-content: center;
            align-items: flex-start;
            position: relative;
            z-index: 1001; 
            order: -1;
        }
        .menu-toggle span {
            width: 100%;
            height: 3px;
            background: var(--primary-light);
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        
        /* ================================================= */
        /* 3. الهيدر والكونتينر (Header & Container)        */
        /* ================================================= */

        header {
            background: linear-gradient(135deg, var(--primary) 0%, #a0204d 100%);
            color: white;
            text-align: center;
            padding: 130px 40px;
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
        }
        
        .main-title {
            font-size: 64px;
            font-weight: 900;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        .container {
            max-width: 1440px; 
            margin: 0 auto;
            padding: 70px 40px;
        }
        
        .section-title {
            font-size: 38px;
            font-weight: 800;
            color: var(--primary-light);
            margin-bottom: 55px;
            border-right: 5px solid var(--primary);
            padding-right: 15px;
            display: inline-flex;
        }
        
        /* ================================================= */
        /* 4. بطاقات المسلسلات (Series Cards) - شكل القلب   */
        /* ================================================= */
        
        .series-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(310px, 1fr));
            gap: 45px;
        }

        .series-card {
            background: var(--bg-card);
            border-radius: var(--card-radius);
            box-shadow: 0 8px 30px var(--shadow-subtle);
            overflow: hidden;
            position: relative;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 480px;
        }
        
        .series-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }
        
        /* حاوية القلب والأشياء الأخرى... */
        .heart-shape-wrapper {
            position: relative;
            width: 90%; 
            height: 90%; 
            background: var(--bg-card);
            border-radius: var(--card-radius);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid var(--primary);
        }

        .heart-shape-wrapper::before,
        .heart-shape-wrapper::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 50%;
            background: var(--bg-card);
            border-radius: 50% 50% 0 0;
            left: 0;
            transform-origin: bottom center;
            z-index: 1;
        }
        .heart-shape-wrapper::before {
            top: -25%;
            left: -25%;
            transform: rotate(-45deg);
        }
        .heart-shape-wrapper::after {
            top: -25%;
            right: -25%;
            transform: rotate(45deg);
        }


        .series-image-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2;
        }
        .series-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.7);
        }
        
        .series-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 30px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            color: white;
            text-align: right;
            z-index: 3;
        }

        .series-title {
            font-size: 26px;
            font-weight: 800;
            color: var(--primary-light);
        }
        .series-title-en {
            color: var(--text-gray);
        }
        .series-meta {
            color: var(--text-gray);
        }
        .series-badge {
            background: var(--primary);
            color: var(--primary-light);
            border-radius: 8px;
            padding: 6px 12px;
            font-weight: 700;
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }
        
        .series-wishlist {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            color: var(--primary-light);
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        .series-wishlist:hover {
            background: var(--primary-light);
            color: var(--primary);
        }
        
        /* ================================================= */
        /* 5. النافذة المنبثقة للتفاصيل (Details Modal) *جديد* */
        /* ================================================= */

        .details-modal-overlay {
            /* تعديلات لتعمل كـ Modal تفتح فوق كل شيء */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85); /* تعتيم الخلفية */
            z-index: 2000; /* يجب أن تكون فوق كل شيء ما عدا المشغل */
            display: none; /* إخفاؤها افتراضياً */
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease-in-out;
            overflow-y: auto; /* للسماح بالتمرير داخل النافذة */
        }

        .details-modal-overlay.active {
            display: flex;
            opacity: 1;
            pointer-events: auto;
        }

        .details-page {
            /* محتوى الـ Modal */
            background: var(--bg-body);
            width: 90%;
            max-width: 1200px;
            max-height: 90vh; /* لضمان ترك مساحة في الشاشة */
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            overflow: hidden; /* مهم للاطراف الدائرية */
            transform: scale(0.9);
            transition: transform 0.4s ease-in-out;
            margin: 20px 0;
        }
        
        .details-modal-overlay.active .details-page {
            transform: scale(1);
        }

        .details-content {
            /* التأكد من أن التمرير يعمل داخل الصفحة الداخلية */
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .details-header {
            position: relative;
            background-color: var(--secondary);
            height: 400px;
            display: flex;
            align-items: flex-end;
            padding: 30px;
            box-shadow: inset 0 -100px 50px rgba(0, 0, 0, 0.9);
        }
        .details-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            /* ******* التعديل المطلوب: تم تخفيف الضبابية إلى 5px ******* */
            filter: **blur(5px)** brightness(0.4); 
            opacity: 0.9;
        }

        .details-info { position: relative; z-index: 10; color: var(--text-light); }
        .details-title { font-size: 48px; font-weight: 900; color: var(--primary-light); }
        .details-title-en { color: var(--text-gray); }
        
        .close-details-btn {
            position: absolute; /* وضعه في الزاوية */
            top: 20px;
            left: 20px;
            z-index: 100;
            background: var(--primary);
            color: var(--primary-light);
            border: 2px solid var(--primary-light);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .details-body {
            background: var(--bg-body);
            padding: 50px 70px;
            margin-top: 0; /* تم إزالة الهامش السالب */
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.3);
        }

        .details-description {
            color: var(--text-gray);
            border-right: 5px solid var(--primary);
            padding-right: 15px;
            margin-bottom: 40px;
        }

        .episodes-section-title {
            color: var(--primary-light);
            margin-top: 30px;
        }

        .episodes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        /* أزرار الحلقات داخل القلب (السمة الداكنة) - الأصلية لفتح المشغل */
        .episode-btn-wrapper {
            position: relative;
            width: 80px; 
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
        }

        .episode-btn {
            /* تصميم أزرار الحلقات (التي سيتم تقليدها) */
            position: absolute;
            z-index: 5;
            font-size: 20px;
            font-weight: 700;
            color: var(--text-light);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
        }

        .episode-heart {
            position: absolute;
            font-size: 80px; 
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .episode-heart:hover {
            color: var(--primary-light);
            transform: scale(1.1);
        }
        
        .episode-heart-bg {
            color: var(--primary-light); 
            opacity: 0.1;
            font-size: 85px;
        }
        
        /* ================================================= */
        /* 6. مشغل الفيديو (Video Player) - أزرار التحكم  */
        /* ================================================= */

        .video-player {
            background: var(--secondary);
            z-index: 4000;
            flex-direction: column;
        }
        
        .video-header {
            background: var(--secondary);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-light);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .video-title {
            color: var(--primary-light); 
            font-size: 24px;
        }
        .player-settings { color: var(--text-gray); }
        .player-setting-item:hover { color: var(--primary-light); }

        /* تعديل زر الإغلاق (X) في المشغل */
        .close-player {
            background: var(--primary);
            color: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            transition: background 0.3s, transform 0.3s;
            padding: 0;
        }
        .close-player:hover {
            background: var(--primary-light);
            color: var(--secondary);
            transform: scale(1.1);
        }
        /* إزالة نص "إغلاق" والاكتفاء بالـ X */
        .close-player i { margin: 0; }
        
        .video-container {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            flex-direction: column; /* لجعل محتوى المشغل عمودياً */
        }
        
        #rumble_player {
            width: 100%;
            height: 100%;
            flex-grow: 1; /* للسماح للمشغل باستهلاك المساحة المتبقية */
        }

        /* حاوية أزرار التنقل (الحلقة السابقة/التالية) تحت الفيديو */
        .episode-navigation {
            display: flex;
            justify-content: center;
            gap: 20px; /* مسافة بين الزرين */
            padding: 15px 40px;
            width: 100%;
            background: var(--bg-card);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
        }

        /* تصميم زر التنقل (مشابه لستايل أزرار الحلقات/القلب) */
        .nav-episode-btn {
            min-width: 150px;
            padding: 10px 20px;
            border-radius: 50px; /* شكل دائري قليلاً */
            background: var(--primary); 
            color: var(--primary-light);
            font-size: 18px;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .nav-episode-btn:hover {
            background: var(--primary-light);
            color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 6px 15px var(--shadow-focus);
        }

        /* الأزرار العائمة القديمة في المشغل (تم إخفاؤها) */
        .player-nav-buttons,
        .player-episode-info {
            display: none !important;
        }
        
        /* ================================================= */
        /* 7. الفوتر (Footer)                               */
        /* ================================================= */

        footer {
            background: var(--secondary);
            color: var(--text-gray);
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
        }
        .footer-links a {
            color: var(--primary-light);
        }
        .footer-links a:hover {
            color: var(--primary);
        }
        
        /* ================================================= */
        /* 8. زر العودة للأعلى (FAB) - تعديل المظهر والشكل  */
        /* ================================================= */

        #scrollToTopBtn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 999;
            width: 55px; /* زيادة الحجم */
            height: 55px; /* زيادة الحجم */
            border-radius: 50%;
            background: var(--primary);
            color: var(--primary-light);
            border: 3px solid var(--primary-light); /* إضافة حدود لجذب الانتباه */
            font-size: 22px; /* تكبير الأيقونة */
            display: none; /* يتم التحكم بها بالـ JS */
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 12px var(--shadow-focus);
            opacity: 0;
            visibility: hidden;
            transform: scale(0.8);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        
        #scrollToTopBtn.visible {
            display: flex !important;
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }
        
        #scrollToTopBtn:hover {
            background: var(--primary-light);
            color: var(--primary);
            transform: scale(1.1);
            border-color: var(--primary);
            box-shadow: 0 6px 20px var(--primary-light);
        }

        /* ================================================= */
        /* 9. القائمة الجانبية (Sidebar) مع روابط التواصل *معدّل* */
        /* ================================================= */

        /* تعديل الـ nav-links ليصبح الـ Sidebar */
        .nav-links {
            /* إعدادات سطح المكتب */
            display: flex; /* لسطح المكتب */
            gap: 25px;
            align-items: center;
            flex-direction: row; /* لسطح المكتب */
            position: static; /* لسطح المكتب */
            width: auto;
            height: auto;
            background: none;
            box-shadow: none;
        }
        
        /* إخفاء قسم التواصل الاجتماعي على سطح المكتب */
        .social-support-links {
            display: none;
        }

        @media (max-width: 768px) {
            .nav-container { padding: 0 15px; }
            .logo { font-size: 30px; }
            .menu-toggle { display: flex !important; }

            /* إعدادات القائمة الجانبية (Sidebar) على الهاتف */
            .nav-links {
                position: fixed;
                top: 0;
                right: -250px; 
                width: 250px; 
                height: 100%;
                background: var(--bg-card);
                flex-direction: column;
                padding: 75px 15px 15px;
                display: flex; /* تفعيل flex لإظهارها لاحقاً */
                box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
                transition: transform 0.4s ease-out;
                z-index: 999;
                text-align: right;
            }
            .nav-links.active {
                transform: translateX(-250px); /* تحريكها لليسار (باتجاه اليمين في لغة RTL) */
            }
            .nav-links a { width: 100%; text-align: right; color: var(--text-dark); }
            .nav-links a:hover { color: var(--text-light); }

            /* إظهار قسم التواصل الاجتماعي في الـ Sidebar على الهاتف */
            .social-support-links {
                display: flex;
                flex-direction: column;
                gap: 15px;
                padding: 20px 0;
                margin-top: auto; /* دفعها للأسفل */
                border-top: 1px solid var(--text-gray);
            }
            .social-support-links h4 {
                color: var(--primary-light);
                font-size: 16px;
                margin-bottom: 10px;
            }
            .social-icons-wrapper {
                display: flex;
                gap: 20px;
                justify-content: center;
            }
            .social-icons-wrapper a {
                color: var(--text-gray);
                font-size: 24px;
                padding: 0;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 50%;
                transition: color 0.3s, transform 0.3s;
            }
            .social-icons-wrapper a:hover {
                color: var(--primary);
                background: none;
                transform: scale(1.1);
            }

            header { padding: 90px 15px; border-radius: 20px; }
            .main-title { font-size: 48px; }
            .container { padding: 40px 15px; }
            .section-title { font-size: 30px; border-right-width: 3px; }
            
            .series-card { min-height: 400px; }
            
            /* تعديلات الـ Modal على الهاتف */
            .details-modal-overlay { align-items: flex-start; }
            .details-page { 
                width: 100%; 
                max-width: 100%;
                height: 100vh;
                max-height: 100vh;
                border-radius: 0;
            }
            .details-header { height: 350px; padding: 30px; }
            .details-title { font-size: 34px; }
            .details-body { padding: 30px 20px; margin-top: 0; }
            .close-details-btn { top: 15px; left: 15px; width: 35px; height: 35px; font-size: 16px; }

            .episode-btn-wrapper { width: 70px; height: 70px; }
            .episode-heart { font-size: 70px; }
            
            .player-nav-buttons .nav-btn { width: 45px; height: 45px; font-size: 22px; }
            .player-episode-info { top: 10px; right: 10px; font-size: 15px; }
            .video-header { flex-direction: column; align-items: flex-start; gap: 10px; padding: 15px 20px; }
            .close-player { 
                width: 35px; 
                height: 35px; 
                position: absolute; /* وضعه في الزاوية العلوية اليمنى في الـ header */
                top: 10px;
                left: 10px;
            }
            .episode-navigation { padding: 10px 15px; gap: 10px; }
            .nav-episode-btn { min-width: 120px; font-size: 16px; padding: 8px 15px; }
        }
    </style>
</head>
<body>
    <script>
        !function(r,u,m,b,l,e){r._Rumble=b,r[b]||(r[b]=function(){(r[b]._=r[b]._||[]).push(arguments);if(r[b]._.length==1){l=u.createElement(m),e=u.getElementsByTagName(m)[0],l.async=1,l.src="https://rumble.com/embedJS/u4nnppa"+(arguments[1].video?'.'+arguments[1].video:'')+"/?url="+encodeURIComponent(location.href)+"&args="+encodeURIComponent(JSON.stringify([].slice.apply(arguments))),e.parentNode.insertBefore(l,e)}})}(window, document, "script", "Rumble");
    </script>

    <nav>
        <div class="nav-container">
            <div class="menu-toggle" onclick="toggleNav()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div>
                <div class="logo">Aşk diz</div>
                <div class="logo-subtitle" style="font-size: 13px; color: var(--text-gray); font-weight: 500;">المسلسلات التركية</div>
            </div>
            <div class="nav-links" id="navLinks">
                <a href="#home" onclick="closeNav()"><i class="fas fa-home"></i> الرئيسية</a>
                <a href="#series" onclick="closeNav()"><i class="fas fa-tv"></i> المسلسلات</a>
                <a href="#new" onclick="closeNav()"><i class="fas fa-fire"></i> الجديد</a>
                <a href="#popular" onclick="closeNav()"><i class="fas fa-chart-line"></i> الأكثر مشاهدة</a>
                
                <div class="social-support-links">
                    <h4><i class="fas fa-hand-holding-heart"></i> لدعم الموقع ومتابعتنا</h4>
                    <div class="social-icons-wrapper">
                        <a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" target="_blank"><i class="fab fa-twitter"></i></a>
                        <a href="#" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="#" target="_blank"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <header id="home">
        <h1 class="main-title">Aşk diz</h1>
        <p class="main-subtitle" style="font-size: 22px; font-weight: 400; margin-top: 15px;">شاهد أفضل المسلسلات التركية المترجمة بجودة عالية</p>
    </header>

    <div class="container" id="series">
        <h2 class="section-title"><i class="fas fa-bolt" style="color: var(--primary-light);"></i> أحدث المسلسلات المضافة</h2>
        <div class="series-grid" id="seriesGrid"></div>
    </div>

    <button id="scrollToTopBtn" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    <div class="details-modal-overlay" id="detailsModalOverlay">
        <div class="details-page">
            <div class="details-content">
                <button class="close-details-btn" onclick="closeDetailsPage()">
                    <i class="fas fa-times"></i>
                </button>

                <div class="details-header" id="detailsHeader">
                    <div class="details-backdrop" id="detailsBackdrop"></div>
                    <div class="details-info">
                        <h1 class="details-title" id="detailsTitle"></h1>
                        <p class="details-title-en" id="detailsTitleEn"></p>
                    </div>
                </div>

                <div class="details-body">
                    <h3 class="episodes-section-title"><i class="fas fa-info-circle" style="color: var(--primary);"></i> ملخص المسلسل</h3>
                    <div class="details-description" id="detailsDescription"></div>
                    
                    <h3 class="episodes-section-title"><i class="fas fa-heart" style="color: var(--primary-light);"></i> اختر الحلقة (قلوب)</h3>
                    <div class="episodes-grid" id="episodesGrid"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="loadingModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; justify-content: center; align-items: center; flex-direction: column; background: rgba(0, 0, 0, 0.95); z-index: 5000;">
        <div class="loading-title" style="color: var(--primary-light); font-size: 32px;">يتم الآن تجهيز المشغل...</div>
        <div class="countdown-timer" style="color: var(--primary-light);">
            <div class="countdown-timer-ring" style="border-top-color: var(--primary-light);"></div>
            <span id="countdownTimer">3</span>
        </div> 
    </div>

    <div class="video-player" id="videoPlayer" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;">
        <div class="video-header">
            <div>
                <div class="video-title" id="videoTitle"></div>
                <div class="player-settings">
                    <span class="player-setting-item"><i class="fas fa-cog"></i> إعدادات الجودة</span> 
                    <span class="player-setting-item"><i class="fas fa-closed-captioning"></i> الترجمة</span> 
                    <span class="player-setting-item"><i class="fas fa-tachometer-alt"></i> السرعة</span>
                </div>
            </div>
            <button class="close-player" onclick="closePlayer()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="video-container">
            <div id="rumble_player" style="width: 100%; height: 100%;"></div>

            <div class="episode-navigation">
                <button class="nav-episode-btn" id="prevEpisodeBtn" style="display: none;" onclick="navigateEpisode(-1)">
                    <i class="fas fa-arrow-right"></i> الحلقة السابقة
                </button>
                
                <button class="nav-episode-btn" id="currentEpisodeBtn" style="display: none; background: var(--bg-card); color: var(--primary-light); cursor: default; border: 2px solid var(--primary);">
                    الحلقة <span id="currentEpisodeNumDisplay"></span>
                </button>
                
                <button class="nav-episode-btn" id="nextEpisodeBtn" style="display: none;" onclick="navigateEpisode(1)">
                    الحلقة التالية <i class="fas fa-arrow-left"></i>
                </button>
            </div>
        </div>
    </div>

    <footer id="contact">
        <div style="max-width: 1000px; margin: 0 auto;">
            <div class="footer-links" style="display: flex; justify-content: center; gap: 20px; margin-bottom: 15px;">
                <a href="#home" style="color: var(--primary-light);">الرئيسية</a>
                <a href="#series" style="color: var(--primary-light);">المسلسلات</a>
                <a href="#" style="color: var(--primary-light);">سياسة الخصوصية</a>
            </div>
            <p class="footer-text">© 2024 Aşk diz - جميع الحقوق محفوظة</p>
        </div>
    </footer>

    <script>
        // Series Data
        const seriesData = [
            {
                id: 1,
                title: "حلم اشرف",
                titleEn: "Eşref'in rüyası",
                image: "https://3esk.onl/wp-content/uploads/2025/09/esref-ruya-2.jpg", 
                description: "انضم أشرف إلى المافيا وأصبح أحد أقوى رجالها، بينما يواصل بحثه لسنوات عن فتاة حلم بها وأسماها رؤيا. يقع في حب نيسان، دون أن يدرك أنها هي نفسها رؤيا، وأنها تعمل سراً كمخبرة للشرطة، ليجد نفسه عالقًا بين الحب والخيانة والصراع على النفوذ. دراما شيقة ومؤثرة جداً تتجاوز حدود التوقعات.",
                episodes: 21, rating: "9.2", year: "2025",
                episodeLinks: { 1: "v6z54rg", 2: "v6z54rg", 3: "v6z54rg", 4: "v6z54rg", 5: "v6z54rg" } // تم زيادة الحلقات للتجربة
            },
            {
                id: 2,
                title: "الحب لا يفهم الكلام",
                titleEn: "Aşk Laftan Anlamaz",
                image: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&h=700&fit=crop",
                description: "كوميديا رومانسية خفيفة تحكي قصة فتاة بسيطة تعمل في شركة كبيرة وتقع في حب مديرها المتكبر. مسلسل مليء بالمواقف الطريفة والرومانسية والمشاعر المتضاربة.",
                episodes: 30, rating: "8.8", year: "2022",
                episodeLinks: { 1: "v6z54rg", 2: "v6z54rg", 3: "v6z54rg" }
            },
            {
                id: 3,
                title: "الطائر المبكر",
                titleEn: "Erkenci Kuş",
                image: "https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=500&h=700&fit=crop",
                description: "قصة حب جميلة بين مصور محترف وفتاة تحلم بأن تصبح كاتبة. يجمعهما القدر في مواقف طريفة ورومانسية لا تُنسى في عالم الإعلانات.",
                episodes: 51, rating: "9.5", year: "2023",
                episodeLinks: { 1: "v6z54rg", 2: "v6z54rg" }
            }
        ];
        
        let currentPlayingSeriesId = null;
        let currentPlayingEpisodeNum = null;
        let playerControlsTimeout = null;

        function renderSeries() {
            const grid = document.getElementById('seriesGrid');
            grid.innerHTML = seriesData.map(series => `
                <div class="series-card" onclick="openDetailsPage(${series.id})">
                    <div class="heart-shape-wrapper">
                        <div class="series-image-wrapper">
                            <img src="${series.image}" alt="${series.title}" class="series-image">
                            <span class="series-badge"><i class="fas fa-star"></i> ${series.rating}</span>
                            <button class="series-wishlist"><i class="fas fa-heart"></i></button>

                            <div class="series-overlay">
                                <h3 class="series-title">${series.title}</h3>
                                <p class="series-title-en">${series.titleEn}</p>
                                <div class="series-meta">
                                    <span class="meta-item"><i class="fas fa-video"></i> ${series.episodes} حلقة</span>
                                    <span class="meta-item"><i class="fas fa-calendar-alt"></i> ${series.year}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        // تشغيل عرض المسلسلات عند تحميل الصفحة
        window.onload = renderSeries;


        // 1. تعديل وظيفة الهمبرغر والقائمة الجانبية 
        function toggleNav() {
            const navLinks = document.getElementById('navLinks');
            const menuToggle = document.querySelector('.menu-toggle');
            
            navLinks.classList.toggle('active');
            menuToggle.classList.toggle('active');
            
            // التحكم في التمرير عند فتح القائمة الجانبية
            if (navLinks.classList.contains('active')) {
                 document.body.style.overflow = 'hidden';
            } else {
                 document.body.style.overflow = 'auto';
            }
        }
        
        function closeNav() {
            const navLinks = document.getElementById('navLinks');
            const menuToggle = document.querySelector('.menu-toggle');
            
            navLinks.classList.remove('active');
            menuToggle.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // --- وظائف زر العائم (FAB) ---
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.onscroll = function() {
            const btn = document.getElementById('scrollToTopBtn');
            // تأكد من إضافة CSS لـ #scrollToTopBtn
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                // نستخدم class.add/remove للتحكم في الأوباسيتي والـ transform في الـ CSS
                btn.classList.add('visible'); 
            } else {
                btn.classList.remove('visible');
            }
        };

        // 2. تعديل وظائف النافذة المنبثقة للتفاصيل (Modal)
        function openDetailsPage(seriesId) {
            const series = seriesData.find(s => s.id === seriesId);
            if (!series) return;

            const modalOverlay = document.getElementById('detailsModalOverlay'); 
            const detailsBackdrop = document.getElementById('detailsBackdrop');
            const detailsHeader = document.getElementById('detailsHeader');
            const episodesGrid = document.getElementById('episodesGrid');

            detailsBackdrop.style.backgroundImage = `url('${series.image}')`;
            detailsHeader.style.backgroundImage = `url('${series.image}')`;
            
            document.getElementById('detailsTitle').textContent = series.title;
            document.getElementById('detailsTitleEn').textContent = series.titleEn;
            document.getElementById('detailsDescription').textContent = series.description;

            episodesGrid.innerHTML = '';
            for (let i = 1; i <= series.episodes; i++) {
                const wrapper = document.createElement('div');
                wrapper.className = 'episode-btn-wrapper';
                
                const btn = document.createElement('button');
                btn.className = 'episode-btn';
                btn.textContent = i;
                btn.onclick = () => showLoadingAndPlay(seriesId, i); 
                
                const heart = document.createElement('i');
                heart.className = 'fas fa-heart episode-heart';
                heart.onclick = () => btn.click();
                
                const heartBg = document.createElement('i');
                heartBg.className = 'fas fa-heart episode-heart-bg';

                wrapper.appendChild(heartBg);
                wrapper.appendChild(heart);
                wrapper.appendChild(btn);
                episodesGrid.appendChild(wrapper);
            }
            
            // تفعيل النافذة المنبثقة
            modalOverlay.style.display = 'flex';
            setTimeout(() => { modalOverlay.classList.add('active'); }, 10);
            document.body.style.overflow = 'hidden'; // منع تمرير الصفحة الرئيسية
        }

        function closeDetailsPage() {
            const modalOverlay = document.getElementById('detailsModalOverlay'); 
            modalOverlay.classList.remove('active');
            
            setTimeout(() => {
                modalOverlay.style.display = 'none';
                document.body.style.overflow = 'auto'; // إعادة تفعيل تمرير الصفحة الرئيسية
            }, 500); 
        }
        
        // --- وظائف المشغل (Player) ---
        function showLoadingAndPlay(seriesId, episodeNum) {
            closeDetailsPage(); 
            
            const loadingModal = document.getElementById('loadingModal');
            const countdownTimer = document.getElementById('countdownTimer');
            loadingModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';

            let countdown = 3;
            countdownTimer.textContent = countdown;
            
            const timer = setInterval(() => {
                countdown--;
                countdownTimer.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    loadingModal.style.display = 'none';
                    playEpisode(seriesId, episodeNum); 
                }
            }, 1000);
        }

        function playEpisode(seriesId, episodeNum) {
            const series = seriesData.find(s => s.id === seriesId);
            if (!series) return;

            // التأكد من أن رقم الحلقة لا يتجاوز الحدود
            if (episodeNum < 1 || episodeNum > series.episodes) return;

            currentPlayingSeriesId = seriesId;
            currentPlayingEpisodeNum = episodeNum;

            // الحصول على فيديو الـ Rumble (إذا لم يكن موجوداً، يستخدم رابط الحلقة 1 كـ Fallback)
            const videoId = series.episodeLinks[episodeNum] || series.episodeLinks[1];
            
            document.getElementById('videoTitle').textContent = `${series.title} - الحلقة ${episodeNum}`;
            document.getElementById('currentEpisodeNumDisplay').textContent = `${episodeNum}`;
            
            const rumblePlayer = document.getElementById('rumble_player');
            rumblePlayer.innerHTML = '';
            
            // إعادة تحميل المشغل (قد تحتاج هذه الخطوة إلى اختبار دقيق مع Rumble)
            Rumble("play", { video: videoId, div: "rumble_player", autoplay: 1 });
            
            document.getElementById('videoPlayer').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // تحديث حالة أزرار التنقل بين الحلقات
            updatePlayerNavigation(series.episodes, episodeNum);
        }
        
        function closePlayer() {
            document.getElementById('videoPlayer').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('rumble_player').innerHTML = ''; // إيقاف تشغيل الفيديو
            currentPlayingSeriesId = null;
            currentPlayingEpisodeNum = null;
        }
        
        // وظيفة التنقل بين الحلقات
        function navigateEpisode(direction) {
            if (currentPlayingSeriesId !== null && currentPlayingEpisodeNum !== null) {
                const series = seriesData.find(s => s.id === currentPlayingSeriesId);
                const nextEpisode = currentPlayingEpisodeNum + direction;
                
                if (nextEpisode >= 1 && nextEpisode <= series.episodes) {
                    // إخفاء الأزرار مؤقتاً أثناء التحميل
                    document.getElementById('prevEpisodeBtn').style.display = 'none';
                    document.getElementById('nextEpisodeBtn').style.display = 'none';
                    document.getElementById('currentEpisodeBtn').style.display = 'block';

                    // تشغيل الحلقة الجديدة مباشرة (يمكن إضافة شاشة تحميل بسيطة هنا إذا لزم الأمر)
                    playEpisode(currentPlayingSeriesId, nextEpisode);
                }
            }
        }
        
        // وظيفة تحديث أزرار التنقل
        function updatePlayerNavigation(totalEpisodes, currentEpisode) {
            const prevBtn = document.getElementById('prevEpisodeBtn');
            const nextBtn = document.getElementById('nextEpisodeBtn');
            const currentBtn = document.getElementById('currentEpisodeBtn');

            prevBtn.style.display = 'none';
            nextBtn.style.display = 'none';
            currentBtn.style.display = 'none'; // إخفاء زر الحالي افتراضياً

            if (currentEpisode === 1) {
                // الحلقة الأولى: إظهار زر "التالية" فقط، و "الحالية" (حسب طلبك: "زر حلقة 1 فقط")
                if (totalEpisodes > 1) {
                    nextBtn.style.display = 'flex';
                }
                currentBtn.style.display = 'flex';

            } else if (currentEpisode > 1 && currentEpisode < totalEpisodes) {
                // حلقة وسطى: إظهار "السابقة" و "التالية"
                prevBtn.style.display = 'flex';
                nextBtn.style.display = 'flex';
                
            } else if (currentEpisode === totalEpisodes && totalEpisodes > 1) {
                // الحلقة الأخيرة: إظهار "السابقة" فقط
                prevBtn.style.display = 'flex';
            }
        }
        
        // ربط أزرار المشغل بالوظيفة الجديدة
        document.getElementById('prevEpisodeBtn').onclick = () => navigateEpisode(-1);
        document.getElementById('nextEpisodeBtn').onclick = () => navigateEpisode(1);

    </script>
</body>
</html>
